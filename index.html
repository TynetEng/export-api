<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Submit Shipping Instruction</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="parent">
    <div class="" style="text-align: center;">
    <img src="https://tanganyikaexport.com/wp-content/uploads/2023/12/offiial-logo-1.png" style="width: 20%;" />
  </div>
  <div class="container">
    <h2>SUBMIT SHIPPING INSTRUCTION</h2>

    <table class="info-table">
      <tr>
        <th>REFERENCE</th>
        <th>BILL OF LADING NUMBER</th>
      </tr>
      <tr>
        <td>Hello</td>
        <td>Hi</td>
      </tr>
      <tr>
        <th>CARRIER REFERENCE</th>
        <th>DESTINATION PORT</th>
      </tr>
      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <th>LOAD POINT</th>
        <th>VESSEL</th>
      </tr>

      <tr>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <th>LOCAL CLIENT</th>
        <th>PICKUP DATE</th>
      </tr>

      <tr>
        <td></td>
        <td></td>
      </tr>
    </table>

    <h3>FOR OUR RECORDS, PLEASE PROVIDE YOUR NAME AND EMAIL ADDRESS</h3>
    <div class="">
      <table class="info-table">
        <tr>
          <th>Your Name *</th>
          <th>Your Email *</th>
        </tr>

        <tr>
          <td><input type="text" placeholder="Name of person submitting this instruction" required /></td>
          <td><input type="email" placeholder="Email of person submitting this instruction" required /></td>
        </tr>
        
    </table>

    <h3>COMPLETE DETAILS FOR STEPS 1 TO 5</h3>

    <div class="flex-row">
      <div class="section">
        <h4>1. SHIPPER/CONSIGNOR</h4>
        <input type="text" placeholder="Consignor Name" id="consignor-name" />
        <input type="text" placeholder="Consignor Address 1" id="consignor-addr1" />
        <input type="text" placeholder="Consignor Address 2" id="consignor-addr2" />
        <input type="text" placeholder="Consignor City" id="consignor-city" />
        <input type="text" placeholder="Consignor Country" id="consignor-country" />
        <input type="text" placeholder="Consignor Postcode" id="consignor-postcode" />
        <input type="email" placeholder="Consignor Email" id="consignor-email" />
        <input type="tel" placeholder="Consignor Phone" id="consignor-phone" />
      </div>

      <div class="section">
        <h4>3. NOTIFY PARTY <input type="checkbox" id="sameAsConsignee" /> <label for="sameAsConsignee">Use same address as Consignee</label></h4>
        <input type="text" placeholder="Notify Name" id="notify-name" />
        <input type="text" placeholder="Notify Address 1" id="notify-addr1" />
        <input type="text" placeholder="Notify Address 2" id="notify-addr2" />
        <input type="text" placeholder="Notify City" id="notify-city" />
        <input type="text" placeholder="Notify Country" id="notify-country" />
        <input type="text" placeholder="Notify Postcode" id="notify-postcode" />
        <input type="email" placeholder="Notify Email" id="notify-email" />
        <input type="tel" placeholder="Notify Phone" id="notify-phone" />
      </div>
    </div>

    <div class="flex-row">
        <div class="section">
          <h4>2. CONSIGNEE</h4>
          <input type="text" placeholder="Consignee Name" id="consignee-name" />
          <input type="text" placeholder="Consignee Address 1" id="consignee-addr1" />
          <input type="text" placeholder="Consignee Address 2" id="consignee-addr2" />
          <input type="text" placeholder="Consignee City" id="consignee-city" />
          <input type="text" placeholder="Consignee Country" id="consignee-country" />
          <input type="text" placeholder="Consignee Postcode" id="consignee-postcode" />
          <input type="email" placeholder="Consignee Email" id="consignee-email" />
          <input type="tel" placeholder="Consignee Phone" id="consignee-phone" />
        </div>
      

        <div class="section">
          <h4>4. SHIPMENT VALUE</h4>
          <input type="number" placeholder="0.0000" step="0.01" id="shipment-value" />
          

          <h4>5. YOUR REFERENCES & ADDITIONAL INFO</h4>
          <textarea placeholder="Any notes like tracking request, draft BOL, etc." rows="5" id="shipment-notes"></textarea>
        </div>
      </div>
      

      <div class="parent2">
        <h3>CONTAINERS</h3>
      <p>1 CONTAINER ADDED FOR JOB REFERENCE STWLS25104807</p>
      <table class="info-table">
        <thead>
          <tr>
            <th>CONTAINER NUMBER</th>
            <th>SERIAL NUMBER</th>
            <th>NUMBER OF PACKAGES</th>
            <th>PACKAGES DESCRIPTION</th>
            <th>PACKAGE HS CODE</th>
            <th>WEIGHT</th>
            <th>ACTION</th>
          </tr>
        </thead>
        <tbody id="container-list">
          <tr>
            <td data-label="CONTAINER NUMBER">MSNU5692262</td>
            <td data-label="SERIAL NUMBER"><input type="text" /></td>
            <td data-label="NUMBER OF PACKAGES"><input type="number" /></td>
            <td data-label="PACKAGES DESCRIPTION"><input type="text" /></td>
            <td data-label="PACKAGE HS CODE"><input type="text" /></td>
            <td data-label="WEIGHT"><input type="number" /></td>
            <td data-label="ACTION" style="display: flex; flex-direction:row; align-items:center">
              <button class="edit-btn">‚úèÔ∏è</button>
              <button class="delete-btn">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
      
      <button class="btn-add">ADD CONTAINER</button>
      
      <p style="color: red; font-weight: bold;">
        PLEASE COMPLETE SERIAL NUMBER, NUMBER OF PACKAGES, PACKAGES DESCRIPTION AND WEIGHT FOR ALL CONTAINERS.
      </p>
      </div>

      <div id="addContainerModal" class="modal">
        <div class="modal-content">
          <span class="close" id="closeModal">&times;</span>
          <h2>Add Container</h2>
          <div>
            <input type="text" id="containerNumber" placeholder="Container Number" />
            <input type="text" id="serialNumber" placeholder="Serial Number" />
            <input type="number" id="packagesNumber" placeholder="Packages Number" />
            <input type="text" id="packagesDesc" placeholder="Packages Description" />
            <input type="text" id="packagesHS" placeholder="Packages HS Code" />
            <input type="number" id="weight" placeholder="Weight in KG (Enter '0' for VGM)" />
          </div>
      
          <footer>
            <button id="closeModal">Close</button>
            <button id="submitContainer">Add Container</button>
          </footer>
        </div>
      </div>
      
  </div>
  </div>

  <script src="script.js"></script>
</body>

<script>
    document.getElementById("sameAsConsignee").addEventListener("change", function () {
        if (this.checked) {
          document.getElementById("notify-name").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-addr1").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-addr2").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-city").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-country").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-postcode").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-email").value = document.getElementById("consignee-name").value;
          document.getElementById("notify-phone").value = document.getElementById("consignee-name").valuer;
        } else {
          document.querySelectorAll(".section input").forEach(input => input.value = "");
        }
      });

     
      
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("delete-btn")) {
          e.target.closest("tr").remove();
        }
      });

      const modal = document.getElementById("addContainerModal");
const openBtn = document.querySelector(".btn-add");
const closeBtn = document.getElementById("closeModal");
const submitBtn = document.getElementById("submitContainer");

openBtn.onclick = () => modal.style.display = "block";
closeBtn.onclick = () => modal.style.display = "none";
window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

submitBtn.onclick = () => {
  const containerNumber = document.getElementById("containerNumber").value;
  const serialNumber = document.getElementById("serialNumber").value;
  const packagesNumber = document.getElementById("packagesNumber").value;
  const packagesDesc = document.getElementById("packagesDesc").value;
  const packagesHS = document.getElementById("packagesHS").value;
  const weight = document.getElementById("weight").value;


  if (!containerNumber || !serialNumber || !packagesNumber || !packagesDesc || !packagesHS || weight === "") {
    alert("Please complete all fields.");
    return;
  }


  const table = document.getElementById("container-list");
  const newRow = document.createElement("tr");
  newRow.innerHTML = `
    <td>${containerNumber}</td>
    <td>${serialNumber}</td>
    <td>${packagesNumber}</td>
    <td>${packagesDesc}</td>
    <td>${packagesHS}</td>
    <td>${weight}</td>
    <td style="display: flex; flex-direction:row; align-items:center">
      <button class="edit-btn">‚úèÔ∏è</button>
      <button class="delete-btn">üóëÔ∏è</button>
    </td>
  `;
  table.appendChild(newRow);


  modal.style.display = "none";
  document.querySelectorAll('#addContainerModal input').forEach(input => input.value = '');
};

window.addEventListener('DOMContentLoaded', function() {
  function showLoader() {
    let loader = document.getElementById('itemLoaderModal');
    if (!loader) {
      loader = document.createElement('div');
      loader.id = 'itemLoaderModal';
      loader.innerHTML = `
        <div class="loader-modal-content">
          <div class="loader-spinner"></div>
          <div class="loader-text">Loading item data...</div>
        </div>
      `;
      document.body.appendChild(loader);
    }
    loader.style.display = 'flex';
  }
  function hideLoader() {
    let loader = document.getElementById('itemLoaderModal');
    if (loader) loader.style.display = 'none';
  }

  // Get itemId from URL params
  const urlParams = new URLSearchParams(window.location.search);
  const urlItemId = urlParams.get('itemId');
  if (urlItemId) {
    fetchItemData(urlItemId);
  }

  // Fetch API and display result
  function fetchItemData(itemId) {
    showLoader();
    fetch(`https://export-api-45xf.onrender.com/api/item/${itemId}`, {
      method: 'GET',
      headers: {
        'Accept': 'application/json'
      }
    })
      .then(res => {
        if (!res.ok) throw new Error('API returned status ' + res.status);
        return res.json();
      })
      .then(data => {
        hideLoader();
        let resultDiv = document.getElementById('itemResult');
        if (!resultDiv) {
          resultDiv = document.createElement('div');
          resultDiv.id = 'itemResult';
          document.querySelector('.container').prepend(resultDiv);
        }
        // Escape HTML for safety
        function escapeHtml(str) {
          if (!str && str !== 0) return '';
          return String(str).replace(/[&<>"]|'/g, function (c) {
            return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c] || c;
          });
        }
        // Format the data nicely
        let html = `<div class='item-info-box'>`;
        html += `<div><b>Item ID:</b> ${escapeHtml(data.id)}</div>`;
        if (data.reference) html += `<div><b>Reference:</b> ${escapeHtml(data.reference)}</div>`;
        if (data.bolNumber) html += `<div><b>BOL Number:</b> ${escapeHtml(data.bolNumber)}</div>`;
        if (data.carrierReference) html += `<div><b>Carrier Reference:</b> ${escapeHtml(data.carrierReference)}</div>`;
        if (data.destinationPort) html += `<div><b>Destination Port:</b> ${escapeHtml(data.destinationPort)}</div>`;
        if (data.loadPoint) html += `<div><b>Load Point:</b> ${escapeHtml(data.loadPoint)}</div>`;
        if (data.vessel) html += `<div><b>Vessel:</b> ${escapeHtml(data.vessel)}</div>`;
        if (data.localClient) html += `<div><b>Local Client:</b> ${escapeHtml(data.localClient)}</div>`;
        if (data.pickupDate) html += `<div><b>Pickup Date:</b> ${escapeHtml(data.pickupDate)}</div>`;
        html += `</div>`;
        resultDiv.innerHTML = html;
      })
      .catch(err => {
        hideLoader();
        alert('Failed to fetch item data: ' + err);
      });
  }

  // Helper to escape HTML for safe display
  function escapeHtml(str) {
    return str.replace(/[&<>"']/g, function(tag) {
      const chars = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;'
      };
      return chars[tag] || tag;
    });
  }
});
      
      
</script>
<style>
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        background: linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%);
        margin: 0;
        padding: 10px;
        color: #222;
      }
      
      .container {
        max-width: 1200px;
        margin: 30px auto;
        background: #fff;
        padding: 32px 24px;
        border-radius: 16px;
        box-shadow: 0 6px 32px rgba(0,0,0,0.08), 0 1.5px 6px rgba(0,0,0,0.03);
      }
      
      h2, h3, h4 {
        text-align: center;
        margin-top: 30px;
        color: #1d4ed8;
        letter-spacing: 1px;
      }
      h2 {
        font-size: 2.2rem;
        margin-bottom: 18px;
      }
      h3 {
        font-size: 1.3rem;
        margin-bottom: 10px;
      }
      h4 {
        font-size: 1.1rem;
        margin-bottom: 8px;
      }
      
      .info-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-bottom: 30px;
        background: #f1f5f9;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 1px 4px rgba(0,0,0,0.04);
      }
      
      .info-table th, .info-table td {
        border: none;
        padding: 14px 10px;
        text-align: left;
      }
      
      .info-table th{
        font-size: 13px;
        background-color: #e0e7ff;
        color: #1e293b;
        font-weight: bold;
      }
      .info-table tr:nth-child(even) td {
        background: #f8fafc;
      }
      .info-table tr td input{
        outline: 0;
        border: 1px solid #cbd5e1;
        width: 100%;
        padding: 7px 8px;
        border-radius: 5px;
        background: #fff;
        font-size: 14px;
        transition: border 0.2s;
      }
      .info-table tr td input:focus {
        border: 1.5px solid #2563eb;
        background: #f0f6ff;
      }
      .info-table tr td{
        height: 24px;
      }
      .flex-row {
        display: flex;
        flex-wrap: wrap;
        gap: 24px;
      }
      
      .form-group {
        flex: 1;
        display: flex;
        flex-direction: column;
      }
      
      .form-group input {
        padding: 10px;
        font-size: 14px;
        margin-top: 5px;
      }
      
      .section {
        flex: 1;
        border: 1.5px solid #e0e7ff;
        padding: 18px 14px;
        border-radius: 10px;
        margin-top: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: #f8fafc;
        box-shadow: 0 1px 6px rgba(0,0,0,0.03);
      }
      
      .section input {
        margin-top: 10px;
        padding: 10px 8px;
        margin:5px 0;
        border-radius: 6px;
        border: 1px solid #cbd5e1;
        background: #fff;
        font-size: 15px;
        transition: border 0.2s;
      }
      .section input:focus {
        border: 1.5px solid #2563eb;
        background: #f0f6ff;
      }
      textarea {
        padding: 10px;
        resize: vertical;
        border-radius: 6px;
        border: 1px solid #cbd5e1;
        background: #fff;
        font-size: 15px;
        margin-top: 8px;
        transition: border 0.2s;
      }
      textarea:focus {
        border: 1.5px solid #2563eb;
        background: #f0f6ff;
      }
      .btn-add {
        background: linear-gradient(90deg, #2563eb 0%, #1e40af 100%);
        color: white;
        padding: 12px 22px;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        margin-top: 18px;
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(37,99,235,0.08);
        transition: background 0.2s, transform 0.1s;
      }
      .btn-add:hover {
        background: linear-gradient(90deg, #1e40af 0%, #2563eb 100%);
        transform: translateY(-2px) scale(1.03);
      }
      .edit-btn, .delete-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 6px;
        font-size: 1rem;
        font-weight: 500;
        box-shadow: 0 1px 4px rgba(0,0,0,0.06);
        transition: background 0.2s, transform 0.1s;
      }
      .edit-btn {
        background-color: #22c55e;
        color: white;
      }
      .edit-btn:hover {
        background-color: #16a34a;
        transform: scale(1.07);
      }
      .delete-btn {
        background-color: #ef4444;
        color: white;
      }
      .delete-btn:hover {
        background-color: #b91c1c;
        transform: scale(1.07);
      }
      .modal {
        display: none; 
        position: fixed;
        z-index: 999;
        padding-top: 100px;
        left: 0; top: 0;
        width: 100%; height: 100%;
        overflow: auto;
        background-color: rgba(30,41,59,0.18);
        backdrop-filter: blur(2px);
      }
      .modal-content {
        background-color: #fff;
        margin: auto;
        padding: 32px 24px;
        width: 90%;
        max-width: 420px;
        border-radius: 16px;
        position: relative;
        box-shadow: 0 8px 32px rgba(30,41,59,0.18);
        animation: modalIn 0.25s cubic-bezier(.4,0,.2,1);
      }
      @keyframes modalIn {
        from { opacity: 0; transform: translateY(40px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .modal-content div {
        margin-top: 10px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .modal-content input{
        margin-top: 10px;
        padding: 10px 8px;
        margin:5px 0;
        border-radius: 6px;
        border: 1px solid #cbd5e1;
        background: #f8fafc;
        font-size: 15px;
        transition: border 0.2s;
      }
      .modal-content input:focus {
        border: 1.5px solid #2563eb;
        background: #f0f6ff;
      }
      .modal-content footer{
        margin-top: 18px;
        display: flex;
        justify-content: flex-end;
        gap: 12px;
      }
      .modal-content button {
        padding: 10px 18px;
        border-radius: 6px;
        border: none;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
      }
      .modal-content #submitContainer {
        background: linear-gradient(90deg, #2563eb 0%, #1e40af 100%);
        color: #fff;
      }
      .modal-content #submitContainer:hover {
        background: linear-gradient(90deg, #1e40af 0%, #2563eb 100%);
        transform: scale(1.04);
      }
      .modal-content #closeModal {
        background: #e5e7eb;
        color: #222;
      }
      .modal-content #closeModal:hover {
        background: #cbd5e1;
        transform: scale(1.04);
      }
      .close {
        position: absolute;
        right: 15px;
        top: 15px;
        cursor: pointer;
        font-size: 26px;
        color: #64748b;
        transition: color 0.2s;
      }
      .close:hover {
        color: #1d4ed8;
      }
      .item-info-box {
        background: linear-gradient(90deg, #e0e7ff 0%, #f1f5f9 100%);
        border: 2px solid #2563eb;
        border-radius: 10px;
        padding: 18px 16px;
        margin-bottom: 24px;
        font-size: 1.08rem;
        color: #1e293b;
        box-shadow: 0 2px 8px rgba(37,99,235,0.07);
      }
      .item-info-box b {
        color: #1d4ed8;
      }
      #itemLoaderModal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0; top: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(30,41,59,0.18);
        backdrop-filter: blur(2px);
        justify-content: center;
        align-items: center;
      }
      .loader-modal-content {
        background: #fff;
        padding: 36px 32px 28px 32px;
        border-radius: 18px;
        box-shadow: 0 8px 32px rgba(30,41,59,0.18);
        display: flex;
        flex-direction: column;
        align-items: center;
        min-width: 180px;
      }
      .loader-spinner {
        border: 4px solid #e0e7ff;
        border-top: 4px solid #2563eb;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        animation: spin 1s linear infinite;
        margin-bottom: 18px;
      }
      .loader-text {
        color: #1d4ed8;
        font-size: 1.1rem;
        font-weight: 500;
        letter-spacing: 0.5px;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      @media (max-width: 900px) {
        .flex-row {
          flex-direction: column;
        }
        .container {
          padding: 10px 2vw;
        }
      }
      @media (max-width: 600px) {
        body {
          width: 100vw;
          min-width: 0;
          padding: 0;
          margin: 0;
          box-sizing: border-box;
          overflow-x: hidden !important;
          /* Remove or comment out overflow-y if not needed */
          background: linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%);
        }
        .parent {
          width: 100vw;
          max-width: 100vw;
          margin: 0;
          border-radius: 0;
          box-shadow: none;
          background: transparent;
        }
        .container {
          width: 100vw;
          max-width: 100vw;
          border-radius: 0;
          margin: 0;
          box-shadow: none;
          padding: 2vw 1vw;
        }
        .parent2 {
          display: block;
          width: 100%;
        }
        .parent2 .info-table {
          display: block;
          width: 100%;
          overflow-x: auto;
        }
        .parent2 .info-table thead {
          display: none;
        }
        .parent2 .info-table td[data-label]::before {
          content: attr(data-label) ": ";
          font-weight: bold;
          color: #1d4ed8;
          display: block;
          margin-bottom: 2px;
          font-size: 0.97em;
        }
        .parent2 .info-table td, .parent2 .info-table th {
          display: block;
          width: 100%;
          box-sizing: border-box;
          word-break: break-word;
        }
      }
</style>
</html>
